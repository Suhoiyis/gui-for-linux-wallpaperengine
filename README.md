# Linux Wallpaper Engine Python GUI

ä¸€ä¸ªç°ä»£åŒ–çš„ GTK4/Libadwaita å›¾å½¢ç•Œé¢ï¼Œç”¨äºç®¡ç†å’Œåº”ç”¨ Linux Wallpaper Engine çš„åŠ¨æ€å£çº¸ã€‚

## ğŸ¯ é¡¹ç›®ç›®æ ‡

- **è½»é‡åŒ–**ï¼šç›¸æ¯” Electron ç‰ˆæœ¬ï¼ˆç¤¾åŒºå¼€å‘è€…è´¡çŒ®çš„ `linux-wallpaperengine-gui`ï¼‰ï¼Œå†…å­˜å ç”¨æ›´ä½ï¼ˆ<150MBï¼‰
- **åŸç”Ÿä½“éªŒ**ï¼šä½¿ç”¨ GTK4 + Libadwaitaï¼Œä¸ GNOME/ç°ä»£ Linux æ¡Œé¢ç¯ä¿
- **æ˜“ç”¨æ€§**ï¼šæä¾›ç›´è§‚çš„å£çº¸æµè§ˆã€é€‰æ‹©ä¸åº”ç”¨ç•Œé¢
- **åŠŸèƒ½å®Œæ•´æ€§**ï¼šé€æ­¥å¯¹æ ‡ç¤¾åŒº GUI çš„åŠŸèƒ½

## âœ… å½“å‰åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **å£çº¸æµè§ˆ**ï¼šä» Steam Workshop è‡ªåŠ¨æ‰«æå£çº¸åº“
- âœ… **åŒè§†å›¾æ¨¡å¼**ï¼šGridï¼ˆç½‘æ ¼ï¼‰ä¸ Listï¼ˆåˆ—è¡¨ï¼‰è§†å›¾åˆ‡æ¢
- âœ… **ä¾§è¾¹æ è¯¦æƒ…**ï¼šæ˜¾ç¤ºå£çº¸å¤§å›¾ã€æ ‡é¢˜ã€ç±»å‹ã€æ ‡ç­¾ã€æè¿°
- âœ… **å£çº¸åº”ç”¨**ï¼šç‚¹å‡» Apply æŒ‰é’®æˆ–åŒå‡»å¡ç‰‡ç›´æ¥åº”ç”¨å£çº¸
- âœ… **éšæœºé€‰æ‹©**ï¼šI'm feeling lucky éšæœºåº”ç”¨ä¸€å¼ å£çº¸
- âœ… **å¿«é€Ÿåˆ·æ–°**ï¼šRefresh æŒ‰é’®å³æ—¶åŠ è½½æ–°ä¸‹è½½çš„å£çº¸ï¼ˆæ— éœ€é‡å¯ï¼‰
- âœ… **è‡ªåŠ¨åº”ç”¨**ï¼šå¯åŠ¨æ—¶è‡ªåŠ¨åº”ç”¨ä¸Šæ¬¡å£çº¸ï¼ˆè¯»å– config.json çš„ lastWallpaper/lastScreenï¼‰

### è¿›ç¨‹ç®¡ç†
- âœ… **åç«¯è°ƒç”¨**ï¼šæ­£ç¡®ä½¿ç”¨ `linux-wallpaperengine` çš„å‚æ•°æ ¼å¼
- âœ… **å•å®ä¾‹æ§åˆ¶**ï¼šåº”ç”¨å‰è‡ªåŠ¨ pkill æ—§è¿›ç¨‹ï¼Œé¿å…å †å 
- âœ… **å‚æ•°æ•´æ•°åŒ–**ï¼šéŸ³é‡ä¸¥æ ¼ä¼ é€’ä¸ºæ•´æ•°å­—ç¬¦ä¸²ï¼Œé˜²æ­¢æµ®ç‚¹æ•°å´©æºƒ

### å£çº¸å±æ€§ç¼–è¾‘ï¼ˆv0.3ï¼‰
- âœ… **å±æ€§è‡ªåŠ¨åŠ è½½**ï¼šè°ƒç”¨ `--list-properties` è·å–å£çº¸å¯ç¼–è¾‘å±æ€§
- âœ… **åŠ¨æ€æ§ä»¶ç”Ÿæˆ**ï¼šæ ¹æ®å±æ€§ç±»å‹è‡ªåŠ¨ç”Ÿæˆå¯¹åº”æ§ä»¶
  - Sliderï¼ˆæ»‘å—ï¼‰ï¼šè°ƒèŠ‚æ•°å€¼èŒƒå›´
  - Toggleï¼ˆå¼€å…³ï¼‰ï¼šå¸ƒå°”å€¼åˆ‡æ¢
  - Colorï¼ˆé¢œè‰²é€‰æ‹©ï¼‰ï¼šRGB é¢œè‰²é€‰æ‹©å™¨
  - Comboï¼ˆä¸‹æ‹‰é€‰æ‹©ï¼‰ï¼šä»é¢„è®¾é€‰é¡¹ä¸­é€‰æ‹©
- âœ… **å±æ€§å€¼æŒä¹…åŒ–**ï¼šç”¨æˆ·ä¿®æ”¹çš„å±æ€§å€¼ä¿å­˜åˆ°é…ç½®æ–‡ä»¶ï¼Œä¸‹æ¬¡åº”ç”¨æ—¶è‡ªåŠ¨æ¢å¤
- âœ… **å®æ—¶åº”ç”¨**ï¼šä¿®æ”¹å±æ€§åç«‹å³ç”Ÿæ•ˆï¼ˆå¦‚æœå½“å‰æ­£åœ¨æ’­æ”¾è¯¥å£çº¸ï¼‰

### å¤šæ˜¾ç¤ºå™¨æ”¯æŒï¼ˆv0.3ï¼‰
- âœ… **è‡ªåŠ¨æ£€æµ‹å±å¹•**ï¼šä½¿ç”¨ `xrandr --query` è‡ªåŠ¨è·å–å¯ç”¨æ˜¾ç¤ºå™¨åˆ—è¡¨
- âœ… **ä¸‹æ‹‰é€‰æ‹©**ï¼šåœ¨ Advanced è®¾ç½®ä¸­æä¾›å±å¹•ä¸‹æ‹‰é€‰æ‹©ï¼Œæ— éœ€æ‰‹å·¥è¾“å…¥
- âœ… **å±å¹•åˆ·æ–°**ï¼šRefresh Screens æŒ‰é’®å¯é‡æ–°æ£€æµ‹è¿æ¥çš„æ˜¾ç¤ºå™¨
- âš ï¸ **æœªæµ‹è¯•**ï¼šç”±äºå½“å‰ç¯å¢ƒä»…æœ‰ä¸€ä¸ªæ˜¾ç¤ºå™¨ï¼ŒåŠŸèƒ½æœªå®é™…éªŒè¯

### æœç´¢åŠŸèƒ½ï¼ˆv0.3ï¼‰
- âœ… **å®æ—¶æœç´¢**ï¼šé¡¶éƒ¨æœç´¢æ¡†æ”¯æŒæŒ‰å…³é”®è¯å®æ—¶è¿‡æ»¤å£çº¸
- âœ… **å¤šå­—æ®µåŒ¹é…**ï¼šæœç´¢èŒƒå›´åŒ…æ‹¬
  - å£çº¸æ ‡é¢˜
  - æè¿°æ–‡æœ¬
  - æ ‡ç­¾ï¼ˆTagsï¼‰
  - æ–‡ä»¶å¤¹åç§°

### é…ç½®ç®¡ç†
- âœ… **è®¾ç½®é¡µé¢**ï¼šGeneralã€Audioã€Advancedã€Logs å››å¤§ç±»é…ç½®
- âœ… **FPS é™åˆ¶**ï¼š1ï½144fps å¯è°ƒ
- âœ… **éŸ³é¢‘æ§åˆ¶**ï¼šé™éŸ³/éŸ³é‡ 0ï½100 è°ƒèŠ‚
- âœ… **ç¼©æ”¾æ¨¡å¼**ï¼šdefault/stretch/fit/fill å››ç§é€‰é¡¹
- âœ… **å…¨å±æš‚åœ**ï¼štoggle å…¨å±æ—¶æš‚åœå£çº¸
- âœ… **é¼ æ ‡ç¦ç”¨**ï¼štoggle ç¦ç”¨é¼ æ ‡äº¤äº’
- âœ… **å±å¹•é€‰æ‹©**ï¼šAdvanced ä¸­ä¸‹æ‹‰é€‰æ‹©å±å¹•å
- âœ… **Workshop è·¯å¾„**ï¼šå¯è‡ªå®šä¹‰ Workshop å†…å®¹ç›®å½•

### æ—¥å¿—é¢æ¿ï¼ˆv0.5ï¼‰
- âœ… **å®æ—¶æ—¥å¿—æ˜¾ç¤º**ï¼šåº”ç”¨å’Œå£çº¸å¼•æ“çš„æ—¥å¿—å®æ—¶æ˜¾ç¤º
- âœ… **æ—¥å¿—çº§åˆ«**ï¼šæ”¯æŒ DEBUG/INFO/WARNING/ERROR çº§åˆ«
- âœ… **æ—¥å¿—æ¥æº**ï¼šåŒºåˆ† Controller/Engine/GUI æ¥æº
- âœ… **æ—¥å¿—ç®¡ç†**ï¼šClear/Refresh æŒ‰é’®ï¼Œè‡ªåŠ¨é™åˆ¶æœ€å¤§500æ¡
- âœ… **ç­‰å®½å­—ä½“**ï¼šä¾¿äºé˜…è¯»æ—¥å¿—å†…å®¹
- âœ… **é¢œè‰²åŒºåˆ†**ï¼šä¸åŒæ—¥å¿—çº§åˆ«ä½¿ç”¨ä¸åŒé¢œè‰²

### UI/UX
- âœ… **ç°ä»£æ·±è‰²ä¸»é¢˜**ï¼šåœ†è§’ã€é˜´å½±ã€æ‚¬åœæ•ˆæœ
- âœ… **çª—å£çº¦æŸ**ï¼šä¾§è¾¹æ å›ºå®š 320px å®½åº¦ï¼Œä¸è¢«å›¾ç‰‡æ’‘å®½
- âœ… **å½“å‰å£çº¸æ˜¾ç¤º**ï¼šé¡¶éƒ¨å·¥å…·æ æ˜¾ç¤ºå½“å‰åº”ç”¨çš„å£çº¸åç§°
- âœ… **Stop æŒ‰é’®**ï¼šå¿«é€Ÿåœæ­¢å½“å‰å£çº¸æ’­æ”¾
- âœ… **åå°ä¿æ´»çª—å£éšè—**ï¼šæœ€å°åŒ–æˆ–å…³é—­çª—å£ä¼šéšè—åˆ°åå°ï¼ˆè¿›ç¨‹ä¿ç•™ï¼‰

### åå°/CLI æ§åˆ¶ï¼ˆv0.3ï¼‰
- âœ… **åå°å¯åŠ¨**ï¼šæ”¯æŒ `--hidden/--minimized` å¯åŠ¨å‚æ•°ï¼Œå¯åŠ¨åä»…åå°è¿è¡Œï¼Œæ— çª—å£æ˜¾ç¤º
- âœ… **å•å®ä¾‹ CLI æ§åˆ¶**ï¼šæ‰€æœ‰å‘½ä»¤è¡ŒåŠ¨ä½œå‘å¾€åŒä¸€è¿è¡Œå®ä¾‹ï¼ˆå¤ç”¨ GTK ä¸»çº¿ç¨‹ï¼Œé¿å…å¤šå¼€ï¼‰
- âœ… **æ˜¾ç¤º/éšè—çª—å£**ï¼š
  - `--show`ï¼šæ˜¾ç¤ºçª—å£ï¼ˆè‹¥å·²è¿è¡Œåˆ™å±•ç¤ºï¼‰
  - `--hide`ï¼šéšè—çª—å£ï¼ˆè¿›ç¨‹ä¿æŒï¼‰
  - `--toggle`ï¼šåˆ‡æ¢æ˜¾ç¤º/éšè—çŠ¶æ€
- âœ… **å¿«æ·æ“ä½œ**ï¼š
  - `--refresh`ï¼šé‡æ–°æ‰«æå¹¶åŠ è½½å£çº¸åº“
  - `--apply-last`ï¼šç›´æ¥åº”ç”¨ä¸Šæ¬¡ä¿å­˜çš„å£çº¸
  - `--quit`ï¼šå®Œå…¨é€€å‡ºåº”ç”¨ä¸åå°è¿›ç¨‹

## âŒ å°šç¼ºåŠŸèƒ½

### ä¼˜å…ˆçº§ P1ï¼ˆæ ¸å¿ƒç¼ºå¤±ï¼‰
- âŒ **ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡**ï¼š
  - ç›®æ ‡ï¼šåœ¨å±å¹•å³ä¸Š/ä¸‹è§’æ˜¾ç¤ºæ‰˜ç›˜å›¾æ ‡ï¼Œå¯ç‚¹å‡»æ˜¾ç¤º/éšè—ã€å³é”®èœå•åˆ·æ–°/åº”ç”¨/é€€å‡º
  - å½“å‰çŠ¶æ€ï¼šå°è¯•è¿‡ pystray åº“ï¼Œä½† Wayland/niri ä¸Šä¸å…¼å®¹ï¼ˆD-Bus åç«¯æ— æ³•å·¥ä½œï¼‰
  - æ–¹æ¡ˆè¯„ä¼°ï¼šStatusNotifierItem åœ¨æŸäº› Wayland æ¡Œé¢ç¯å¢ƒä¸Šä¸å¯é 
  - **æš‚æ—¶ä¿ç•™ CLI æ§åˆ¶ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆ**ï¼ˆ`--show/--hide/--toggle/--quit` ç­‰ï¼‰

### ä¼˜å…ˆçº§ P2ï¼ˆåŠŸèƒ½ç¼ºå¤±ï¼‰
- âš ï¸ **å¤šæ˜¾ç¤ºå™¨ç‹¬ç«‹å£çº¸**ï¼šå½“å‰ä»…æ”¯æŒå•ä¸€å±å¹•ï¼Œä¸æ”¯æŒåŒæ—¶ä¸ºä¸åŒæ˜¾ç¤ºå™¨è®¾ç½®ä¸åŒå£çº¸ï¼ˆæ­¤åŠŸèƒ½éœ€åç«¯æ”¯æŒï¼‰
- âŒ **åŸå§‹ JSON ç¼–è¾‘**ï¼šæ— åŸå§‹é…ç½®ç¼–è¾‘ç•Œé¢

### ä¼˜å…ˆçº§ P3ï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰
- âš ï¸ **è‡ªå¯åŠ¨é›†æˆ**ï¼šæ—  systemd å•å…ƒã€æ¡Œé¢æ–‡ä»¶ã€AUR æ‰“åŒ…
- âŒ **åŠ¨æ€å£çº¸é¢„è§ˆ**ï¼šGIF é¢„è§ˆä»…æ˜¾ç¤ºé¦–å¸§ï¼ˆæ€§èƒ½è€ƒè™‘æš‚æœªå®ç°åŠ¨ç”»ï¼‰

## ğŸ§­ åå°/CLI æ§åˆ¶ä½¿ç”¨æŒ‡å—

### å¯åŠ¨æ–¹å¼

**å‰å°å¯åŠ¨ï¼ˆå¸¦ GUIï¼‰**ï¼š
```bash
python3 wallpaper_gui.py
```

**åå°å¯åŠ¨ï¼ˆæ—  GUIï¼Œä»…ä¿æ´»è¿›ç¨‹ï¼‰**ï¼š
```bash
python3 wallpaper_gui.py --hidden
# æˆ–
python3 wallpaper_gui.py --minimized
```

### å‘½ä»¤è¡ŒåŠ¨ä½œ

æ‰€æœ‰ä»¥ä¸‹å‘½ä»¤éƒ½ä¼šå‘å¾€**åŒä¸€è¿è¡Œå®ä¾‹**ï¼Œé¿å…é‡å¤å¯åŠ¨ï¼š

| å‘½ä»¤ | æ•ˆæœ | ç¤ºä¾‹ |
|------|------|------|
| `--show` | æ˜¾ç¤ºçª—å£ï¼ˆè‹¥å·²è¿è¡Œï¼‰ | `python3 wallpaper_gui.py --show` |
| `--hide` | éšè—çª—å£ï¼ˆè¿›ç¨‹ä¿æŒï¼‰ | `python3 wallpaper_gui.py --hide` |
| `--toggle` | åˆ‡æ¢æ˜¾ç¤º/éšè—çŠ¶æ€ | `python3 wallpaper_gui.py --toggle` |
| `--refresh` | é‡æ–°æ‰«æå£çº¸åº“ | `python3 wallpaper_gui.py --refresh` |
| `--apply-last` | åº”ç”¨ä¸Šæ¬¡ä¿å­˜çš„å£çº¸ | `python3 wallpaper_gui.py --apply-last` |
| `--quit` | å®Œå…¨é€€å‡ºåº”ç”¨ä¸è¿›ç¨‹ | `python3 wallpaper_gui.py --quit` |

### Niri é…ç½®ç¤ºä¾‹

åœ¨ `~/.config/niri/config.kdl` ä¸­æ·»åŠ è‡ªå¯åŠ¨ï¼š

```kdl
// åå°å¯åŠ¨å£çº¸å¼•æ“ GUIï¼ˆå¸¦è‡ªåŠ¨åº”ç”¨ä¸Šæ¬¡å£çº¸ï¼‰
exec python3 /home/yua/suw/wallpaper_gui.py --hidden
```

åœ¨ niri è¿è¡Œä¸­ï¼Œå¯ç”¨å¿«æ·é”®æˆ–è„šæœ¬è°ƒç”¨ï¼š

```bash
# æ˜¾ç¤º GUI ä»¥é€‰æ‹©å£çº¸
python3 wallpaper_gui.py --show

# å¿«é€Ÿåº”ç”¨ä¸Šæ¬¡å£çº¸
python3 wallpaper_gui.py --apply-last

# éšè—å›åå°
python3 wallpaper_gui.py --hide
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **è¯­è¨€**ï¼šPython 3.10+
- **UI æ¡†æ¶**ï¼šPyGObject (GTK4) + Libadwaita
- **åç«¯**ï¼šlinux-wallpaperengineï¼ˆC++ å®ç°ï¼‰
- **ä¾èµ–**ï¼š
  ```bash
  python3-gi gir1.2-gtk-4.0 gir1.2-adw-1
  ```

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
sudo apt-get install python3-gi gir1.2-gtk-4.0 gir1.2-adw-1

# è¿è¡Œ
python3 wallpaper_gui.py
```

## ğŸ“ é…ç½®æ–‡ä»¶

ä¿å­˜ä½ç½®ï¼š`~/.config/linux-wallpaperengine-gui/config.json`

ç¤ºä¾‹ï¼š
```json
{
  "fps": 30,
  "volume": 50,
  "scaling": "default",
  "silence": true,
  "noFullscreenPause": false,
  "disableMouse": false,
  "lastWallpaper": "3310692710",
  "lastScreen": "eDP-1",
  "wallpaperProperties": {
    "1828698678": {
      "music": "0",
      "atomic_info": "atomic_mass"
    }
  }
}
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue ä¸ PRï¼ç‰¹åˆ«æ˜¯ä»¥ä¸‹æ–¹é¢ï¼š
- æ–°åŠŸèƒ½å®ç°
- Bug ä¿®å¤ä¸æ€§èƒ½ä¼˜åŒ–
- ç¿»è¯‘ä¸æ–‡æ¡£æ”¹è¿›

## ğŸ“„ è®¸å¯è¯

MIT License

---

**æœ€åæ›´æ–°**ï¼š2026-01-22
**ç‰ˆæœ¬**ï¼š0.5.2-betaï¼ˆæ–°å¢æ—¥å¿—é¢æ¿ï¼Œä¼˜åŒ–æ˜¾ç¤ºï¼‰
