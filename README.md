<h1 align="center">
  <img src="pic/icons/GUI_rounded.png" alt="Logo" width="128" height="128" style="border-radius: 20px;"/><br>
  LINUX WALLPAPER ENGINE GUI
</h1>

<p align="center">A modern GTK4 graphical interface for managing and applying Steam Workshop live wallpapers on Linux.</p>

<p align="center">
    <strong>English</strong> | 
    <a href="README_ZH.md">ç®€ä½“ä¸­æ–‡</a>
<p>

> [!NOTE]
> ğŸŒ Language Note: This English documentation was generated by AI and translating tools. While we strive for accuracy, some technical nuances might be lost. If you spot any linguistic errors, please feel free to  or submit a Pull Request. Your help is much appreciated!

> Built on [linux-wallpaperengine](https://github.com/Almamu/linux-wallpaperengine) backend, optimized for GNOME / Wayland desktop environments.


<div align="center">
  <table width="100%">
    <tr>
      <td align="center"><b>Dark Mode</b></td>
      <td align="center"><b>Light Mode</b></td>
    </tr>
    <tr>
      <td align="center">
        <img src="docs/assets/main-ui.png" width="400" style="display: block;">
      </td>
      <td align="center">
        <img src="docs/assets/light-theme.png" width="400" style="display: block;">
      </td>
    </tr>
  </table>
</div>

## âœ¨ Features

### Core Features

- ğŸ¨ **Light/Dark Theme Adaptive**: Fully adapts to your system's light or dark theme with automatic accent color sync â€” no more unreadable text in light mode
- ğŸ–¥ï¸ **Multi-Monitor Support**: Set independent wallpapers for each display, with Link/Unlink mode for bulk or per-screen control
- ğŸ“œ **Playback History**: Automatically tracks your last 30 played wallpapers with timestamps, thumbnails, and one-click replay
- âœï¸ **Nickname System**: Assign custom nicknames to wallpapers for easier identification; supports batch management and search integration
- ğŸ” **Search & Sort**: Real-time keyword search across titles, descriptions, and tags; sort by name, size, type, or folder ID
- ğŸ“º **System Tray**: Runs in background with quick actions â€” random switch, stop, show/hide window
- âŒ¨ï¸ **Command-Line Control**: Full CLI support for headless operation and remote control via single-instance architecture

### Advanced Features

- ğŸªŸ **Compact Preview Mode**: A dedicated mini-window (300Ã—700) designed for tiling window managers (Niri, Hyprland, Sway) with circular thumbnail navigation and keyboard shortcuts

<p align="center">
  <img src="docs/assets/compact_mode.png" alt="Compact Preview Mode" width="40%"/>
  <br>
</p>


- ğŸ“Š **Performance Monitor**: Real-time CPU/memory tracking with 60-second sparkline charts, per-process breakdown (Frontend, Backend, Tray), and detailed thread lists

    <details>
      <summary>Click to view performance monitoring screenshots</summary>
      <div align="center">
        <br>
        <img src="docs/assets/performance-monitor.png" width="70%" alt="Performance Monitor">
        <p><em>Real-time CPU/memory tracing and process details</em></p>
      </div>
    </details>

- ğŸ“¸ **Smart Screenshot**: Silent 4K capture via Xvfb virtual framebuffer, intelligent delay per wallpaper type, resource usage stats, and screenshot history (last 10 captures)
- ğŸ”„ **Timed Rotation**: Auto-switch wallpapers at configurable intervals; supports random mode and ordered cycling by title, size, type, or folder ID
- â˜° **Hamburger Menu**: Global application menu with Playback History, Check for Updates, Welcome Guide, Restart, and Quit
- ğŸ›ï¸ **Wayland Advanced Tweaks**: Fine-grained control â€” pause only when active window is fullscreen, ignore specific app IDs (e.g., docks, bars)
- ğŸ“‹ **Log Management**: Filter logs by module (Controller/Engine/GUI), copy filtered output for bug reports
- ğŸ–¼ï¸ **GIF Smart Thumbnails**: Intelligent frame extraction (15th frame) to avoid blank/black preview images; supports transparent GIF rendering
- ğŸ”” **Update Checker**: Automatic GitHub release checking with smart rate-limit handling and semantic version comparison

## ğŸš€ Quick Start

### Prerequisites

**Arch Linux:**
```bash
sudo pacman -S python-gobject gtk4 libadwaita libayatana-appindicator
```

**Ubuntu / Debian:**
```bash
sudo apt install python3-gi gir1.2-gtk-4.0 gir1.2-adw-1 libayatana-appindicator3-1
```

**Optional** (for silent screenshots):
```bash
# Arch Linux
sudo pacman -S xorg-server-xvfb

# Ubuntu / Debian
sudo apt install xvfb
```

### Install the Backend

This GUI requires [linux-wallpaperengine](https://github.com/Almamu/linux-wallpaperengine):

```bash
# Follow the backend project's build instructions
# Make sure 'linux-wallpaperengine' is in your PATH
which linux-wallpaperengine  # Verify installation
```

### Run

```bash
# Launch GUI
python3 run_gui.py

# Launch in background (tray icon only)
python3 run_gui.py --hidden

# Show an already-running instance
python3 run_gui.py --show
```

## ğŸ“– Basic Usage

### Browse & Apply Wallpapers

1. **Browse**: The app automatically scans your Steam Workshop wallpaper library on first launch
2. **Apply**: Double-click a wallpaper card or click the **Apply** button in the sidebar
3. **Random**: Click the ğŸ² button in the toolbar or use the tray menu
4. **Stop**: Click the â¹ button in the toolbar
5. **Multi-Monitor**: Select the target display from the top bar dropdown, then apply

### Playback History

Access your recent wallpaper history via the **Hamburger Menu (â˜°) â†’ Playback History**:

- View the last 30 wallpapers with thumbnails, nicknames (italic), original IDs, and timestamps (MM-DD HH:MM)
- One-click replay any previous wallpaper â€” the main window syncs automatically
- Clear history or check capacity (current / 30)

### Nickname Management

Give your wallpapers meaningful names:

- **Set a nickname**: Right-click a wallpaper â†’ "Set Nickname", or click the âœï¸ button in the sidebar
- **Batch manage**: Settings â†’ "Manage Nicknames" to view, edit, or delete all nicknames in a dialog
- **Search integration**: The search box matches both nicknames and original titles
- **Visual distinction**: Nicknames appear in *italic bold* in the grid view; the sidebar shows "Nickname + Original Name (small gray text)"

### Compact Preview Mode

A lightweight preview window designed for tiling WMs:

- **Toggle**: Click the compact mode icon in the toolbar
- **Navigate**: Use `â†` `â†’` keys or the on-screen buttons to cycle through 5 circular thumbnails
- **Quick actions**: Apply, Stop, Lucky (random), and Jump to current wallpaper
- **Window rules**: You may need to configure your WM to float this window â€” see [Advanced Guide](docs/ADVANCED.md#compact-preview-mode)

### Performance Monitoring

Click the monitor icon in the top bar to open the Performance page:

- **Overview cards**: Total CPU, Total Memory, Active Threads
- **Sparkline charts**: 60-second history for CPU (color-coded: green < 20%, orange < 40%, red â‰¥ 40%) and Memory (blue)
- **Process details**: Expand Frontend/Backend/Tray for individual metrics, thread names, and currently playing wallpapers

  <details>
  <summary>Click to expand the settings page screenshot</summary>
  <br>
  <div align="center">
    <img src="docs/assets/settings-page1.png" width="32%" alt="Settings page1">
    <img src="docs/assets/settings-page2.png" width="32%" alt="settings page2">
    <img src="docs/assets/settings-page3.png" width="32%" alt="settings page3">
    <p><em>General Settings / Audio / Advanced Tweaks</em></p>
  </div>
  </details>

## âŒ¨ï¸ Command-Line Control

All commands are sent to the same running instance (single-instance architecture):

| Command | Action |
|---------|--------|
| `--show` | Show the window |
| `--hide` | Hide the window (process keeps running) |
| `--toggle` | Toggle show/hide |
| `--random` | Random wallpaper switch |
| `--stop` | Stop current wallpaper |
| `--apply-last` | Apply the last used wallpaper |
| `--refresh` | Rescan wallpaper library |
| `--quit` | Fully exit (GUI + all wallpaper processes) |

**Example:** Autostart with Niri
```bash
# In your niri config.kdl
spawn-at-startup "python3" "/path/to/run_gui.py" "--hidden"

binds {
    Mod+W { spawn "python3" "/path/to/run_gui.py" "--toggle"; }
    Mod+Shift+W { spawn "python3" "/path/to/run_gui.py" "--random"; }
}
```

## âš™ï¸ Configuration

**Location:** `~/.config/linux-wallpaperengine-gui/config.json`

Key settings (all configurable via the GUI's Settings page):

| Setting | Default | Description |
|---------|---------|-------------|
| `fps` | 30 | Frame rate limit (1â€“144) |
| `volume` | 50 | Audio volume (0â€“100) |
| `scaling` | `"default"` | Scaling mode: default / stretch / fit / fill |
| `silence` | `true` | Mute audio |
| `autoRotateEnabled` | `false` | Enable timed wallpaper rotation |
| `rotateInterval` | 30 | Rotation interval in minutes |
| `cycleOrder` | `"random"` | Cycle order: random / title / size / type / id |
| `useXvfb` | `true` | Use Xvfb for silent screenshots |
| `screenshotRes` | `"3840x2160"` | Screenshot resolution |

For the complete configuration reference, see [docs/ADVANCED.md](docs/ADVANCED.md#configuration-reference).

## âš ï¸ Known Limitations

### Wallpaper Type Compatibility

| Type | Status | Notes |
|------|--------|-------|
| **Video** | âœ… Fully supported | MP4/WebM recommended |
| **Web** | âš ï¸ Partial | Renders correctly, but **property adjustments are non-functional** (backend limitation) |
| **Scene** | âš ï¸ Limited | Complex particle systems / custom shaders may glitch or fail |

### Wayland Limitations

- âŒ **Mouse interaction disabled**: Cannot obtain global cursor position; click interactions and mouse trails do not work
- âŒ **Web property injection limited**: CEF communication is restricted under Wayland's security model

For detailed compatibility information, see [docs/COMPATIBILITY.md](docs/COMPATIBILITY.md).

### Other Notes

- **Memory growth**: Long-running Web wallpapers may slowly increase memory usage (upstream engine issue). Enable timed rotation to mitigate.
- **Test environment**: Primarily tested on Arch Linux + Niri. Other environments may require adjustments.

## â“ FAQ

### Why do Web wallpaper property adjustments not work?

The C++ backend uses CEF (Chromium Embedded Framework) for Web wallpapers. On Linux/Wayland, CEF's inter-process communication has compatibility issues that prevent JavaScript property injection from working reliably. Wallpapers will run with their default settings. As a workaround, you can manually edit the wallpaper's `project.json` or HTML source files.

### How can I reduce memory usage?

1. Avoid Web wallpapers (they use CEF/Chromium internally)
2. Enable timed rotation (Settings â†’ Automation) to periodically restart the backend
3. Lower FPS (Settings â†’ General)
4. Disable audio processing (Settings â†’ Advanced)

### The compact preview window doesn't float in my tiling WM

You need to add a window rule in your WM configuration. See [docs/ADVANCED.md](docs/ADVANCED.md#compact-preview-mode) for Niri and Hyprland examples.

### Why are screenshots slow (5â€“10 seconds)?

If Xvfb is installed, the app uses CPU software rendering to produce 4K screenshots silently (no popup window). This is slower but guarantees consistent quality regardless of your physical screen resolution or tiling WM layout. You can disable Xvfb mode in Settings â†’ Advanced for faster (but windowed) screenshots.

### System tray icon is not showing

1. Verify `libayatana-appindicator` is installed
2. GNOME users: Install the "AppIndicator Support" extension
3. Waybar users: Ensure the `tray` module is configured
4. i3/Sway users: You may need `waybar` or another status bar with tray support

### How do I set different wallpapers for each monitor?

Select the target display from the top bar dropdown, then browse and apply a wallpaper. Repeat for each monitor. Use the ğŸ”— Link/Unlink button to toggle between applying to all screens (Same mode) or just the selected screen (Diff mode).

### Can I use this with Flatpak or AppImage?

**AppImage**: Fully supported since v0.10.4 with zero-config desktop integration. The app auto-creates `.desktop` shortcuts and self-heals if the file is moved.

**Flatpak**: Not officially supported yet. File access and sandbox restrictions may affect functionality.

### How do I report a bug?

1. Go to Settings â†’ Logs and click **Copy Logs**
2. Open a [GitHub Issue](https://github.com/Suhoiyis/gui-for-linux-wallpaperengine/issues)
3. Include: system info (`uname -a`), desktop environment, wallpaper ID/type, and the copied logs

## ğŸ›ï¸ Technical Architecture

### Project Structure

```
suw/
â”œâ”€â”€ py_GUI/                    # Main application package
â”‚   â”œâ”€â”€ core/                  # Core logic
â”‚   â”‚   â”œâ”€â”€ controller.py      # WallpaperController â€” process management
â”‚   â”‚   â”œâ”€â”€ config_manager.py  # ConfigManager â€” settings I/O with robust fallback
â”‚   â”‚   â”œâ”€â”€ history.py         # HistoryManager â€” playback history (30 entries)
â”‚   â”‚   â””â”€â”€ nickname.py        # NicknameManager â€” alias persistence
â”‚   â”œâ”€â”€ ui/                    # User interface
â”‚   â”‚   â”œâ”€â”€ app.py             # Main application window
â”‚   â”‚   â”œâ”€â”€ components/        # Reusable components (navbar, sidebar, preview)
â”‚   â”‚   â””â”€â”€ pages/             # Page views (wallpapers, settings, performance)
â”‚   â”œâ”€â”€ utils/                 # Utilities
â”‚   â”‚   â”œâ”€â”€ performance.py     # PerformanceMonitor â€” CPU/memory tracking
â”‚   â”‚   â””â”€â”€ logger.py          # Logging configuration
â”‚   â””â”€â”€ const.py               # Constants, version, CSS styles
â”œâ”€â”€ run_gui.py                 # Entry point
â”œâ”€â”€ docs/                      # Documentation
â”‚   â””â”€â”€ assets/                # Screenshots and images
â””â”€â”€ pic/icons/                 # Application icons
```

### Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GTK4 + Libadwaita             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Wallpaperâ”‚  â”‚ Settings â”‚  â”‚  Performance   â”‚  â”‚
â”‚  â”‚   Page   â”‚  â”‚   Page   â”‚  â”‚    Monitor     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚             â”‚                â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           WallpaperController               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Config   â”‚ â”‚ History  â”‚ â”‚  Nickname    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Manager  â”‚ â”‚ Manager  â”‚ â”‚  Manager     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â”‚ subprocess                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚         linux-wallpaperengine (C++)          â”‚â”‚
â”‚  â”‚         Rendering Â· Audio Â· Screenshot       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         System Tray (libayatana)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Design Decisions

- **Single-instance architecture**: All CLI commands route to the running GTK application via `Gio.Application`, avoiding process duplication
- **Defensive configuration**: `ConfigManager.get()` handles `None` values and falsy-but-valid values (e.g., `volume=0`) correctly
- **Theme variables**: All UI colors use GTK/Libadwaita named colors (`@window_bg_color`, `@theme_fg_color`, `@accent_bg_color`) for seamless theme adaptation
- **Object pooling**: Compact mode thumbnails use object pooling to eliminate scroll jank

## ğŸ“š Documentation

| Document | Description |
|----------|-------------|
| [CHANGELOG.md](CHANGELOG.md) | Version history and release notes |
| [docs/ADVANCED.md](docs/ADVANCED.md) | Advanced features, configuration reference, and WM integration |
| [docs/COMPATIBILITY.md](docs/COMPATIBILITY.md) | Wallpaper type compatibility, Wayland limitations, hardware requirements |
| [docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md) | Common errors, backend log analysis, and fixes |

## ğŸ”§ Tech Stack

- **Language**: Python 3.10+
- **UI Framework**: PyGObject (GTK4 + Libadwaita)
- **System Tray**: libayatana-appindicator
- **Backend**: linux-wallpaperengine (C++)
- **Charts**: Cairo-based sparkline components

## ğŸ¤ Contributing

Contributions are welcome!

- Feature requests and bug reports â†’ [Open an Issue](https://github.com/Suhoiyis/gui-for-linux-wallpaperengine/issues)
- Code contributions â†’ Follow existing code style and submit a Pull Request
- Documentation improvements are equally appreciated

## ğŸ™ Acknowledgements

> Some UI design inspiration was drawn from [AzPepoze/linux-wallpaperengine-gui](https://github.com/AzPepoze/linux-wallpaperengine-gui).
>
> It is an excellent GUI project â€” we recommend checking it out.

## ğŸ“„ License

GPL-3.0 license

---

**Current Version**: v0.10.5

**Last Updated**: 2026-02-13

*A Vibe Coding experiment project*
